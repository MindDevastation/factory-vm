# Copy to deploy/env and fill values. Do NOT commit real secrets.

# Paths
FACTORY_DB_PATH=./data/factory.sqlite3
FACTORY_STORAGE_ROOT=./storage

# HTTP
FACTORY_BIND=0.0.0.0
FACTORY_PORT=8080
FACTORY_BASIC_AUTH_USER=admin
FACTORY_BASIC_AUTH_PASS=change_me

# Google Drive origin
# This must be the folder ID of /FactoryOrigin
GDRIVE_ROOT_ID=YOUR_FACTORYORIGIN_FOLDER_ID
GDRIVE_LIBRARY_ROOT_ID=YOUR_FACTORYORIGIN_FOLDER_ID

# Choose ONE auth method for Drive:
# 1) Service account (recommended): share the FactoryOrigin folder with the service account email.
# GDRIVE_SERVICE_ACCOUNT_JSON=/secure/gdrive_service_account.json
# 2) OAuth (optional):
# GDRIVE_OAUTH_CLIENT_JSON=/secure/client_secret.json
# GDRIVE_OAUTH_TOKEN_JSON=/secure/gdrive_token.json
# Required for Track Catalog Discover/Analyze workers and /v1/oauth/gdrive/* endpoints.
GDRIVE_CLIENT_SECRET_JSON=/secure/client_secret.json
# Required for Track Catalog Discover/Analyze workers.
# Per-channel token layout: ${GDRIVE_TOKENS_DIR}/${channel_slug}/token.json
GDRIVE_TOKENS_DIR=/secure/gdrive/channels


# OAuth redirect/state (used by admin OAuth token endpoints)
# Use HTTPS in production; localhost HTTP is acceptable for local dev.
OAUTH_REDIRECT_BASE_URL=http://localhost:8080
OAUTH_STATE_SECRET=change_me_random_long_secret

# YouTube OAuth
# Global OAuth client secret (required when UPLOAD_BACKEND=youtube)
YT_CLIENT_SECRET_JSON=/secure/client_secret.json
# Per-channel token layout: ${YT_TOKENS_DIR}/${channel_slug}/token.json
YT_TOKENS_DIR=/secure/youtube/channels
# Example: /secure/youtube/channels/titanwave-sonic/token.json
# Example generation command: python scripts/youtube_auth.py --channel-slug titanwave-sonic

# Telegram
TG_BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN
TG_ADMIN_CHAT_ID=0  # must be numeric (Telegram chat id)

# Optional: how often workers tick (seconds)
WORKER_SLEEP_SEC=5

# Reliability
JOB_LOCK_TTL_SEC=43200
RETRY_BACKOFF_SEC=300
MAX_RENDER_ATTEMPTS=3
MAX_UPLOAD_ATTEMPTS=3
QA_VOLUMEDETECT_SECONDS=180


# Runtime switching
# prod: ORIGIN_BACKEND=local UPLOAD_BACKEND=mock TELEGRAM_ENABLED=0
# local: ORIGIN_BACKEND=local UPLOAD_BACKEND=mock TELEGRAM_ENABLED=0
ORIGIN_BACKEND=local
ORIGIN_LOCAL_ROOT=local_origin

UPLOAD_BACKEND=mock
TELEGRAM_ENABLED=0
